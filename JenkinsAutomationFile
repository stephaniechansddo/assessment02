pipeline {
	agent any
	tools {
		maven 'maven 3.9.6'
		jdk 'openjdk11'
	}
	stages {
		stage("Clean") {
			steps {
				echo "Start Clean"
				bat "mvn clean"
				echo "Maven clean is completed"
			}
		}
		stage("Test") {
			steps {
				echo "Start Test"
				bat "mvn test"
				echo "Maven test is completed"
			}
		}
		stage("Build & Sonar") {
			parallel {
				stage("Build") {
					steps {
						echo "Start build"
						bat "mvn install -DskipTests"
						echo "Maven build is completed"
					}
				}
				stage("Sonar") {
					steps{
						echo "Start Sonar"
						bat "mvn sonar:sonar"
					}
				}
			}
		}
	}
}
